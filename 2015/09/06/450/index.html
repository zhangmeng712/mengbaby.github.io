<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>React生命周期、API和深入用法 | 萌小主前端部落 | the more you know the more you know you don&#39;t know</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="React">
    <meta name="description" content="React火了很久了，一直都停留在照葫芦画瓢按照example凑数的基础上，但是如果真的要了解一个框架，它的生命周期和核心API是最重要的部分了，下面我们就来聊聊React的生命周期、核心API的用法以及React工具集，在使用React进行深度开发的时候，一定会事半功倍。本文假设你已经了解了React的基本开发知识，如果不了解，强烈推荐阮老师的这篇《React 入门实例教程》 一、生命周期 1、">
<meta name="keywords" content="React">
<meta property="og:type" content="article">
<meta property="og:title" content="React生命周期、API和深入用法">
<meta property="og:url" content="https://mengbaby.github.io/2015/09/06/450/index.html">
<meta property="og:site_name" content="萌小主前端部落">
<meta property="og:description" content="React火了很久了，一直都停留在照葫芦画瓢按照example凑数的基础上，但是如果真的要了解一个框架，它的生命周期和核心API是最重要的部分了，下面我们就来聊聊React的生命周期、核心API的用法以及React工具集，在使用React进行深度开发的时候，一定会事半功倍。本文假设你已经了解了React的基本开发知识，如果不了解，强烈推荐阮老师的这篇《React 入门实例教程》 一、生命周期 1、">
<meta property="og:image" content="https://pbs.twimg.com/media/B-G3_T8CcAAmTHV.jpg:large">
<meta property="og:image" content="http://gtms03.alicdn.com/tps/i3/TB1AAC0JpXXXXcaXpXX45OnYVXX-512-313.jpeg">
<meta property="og:image" content="http://gtms01.alicdn.com/tps/i1/TB1PGy_JpXXXXamXFXX.YGSWpXX-1010-59.jpg">
<meta property="og:updated_time" content="2017-04-17T07:55:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React生命周期、API和深入用法">
<meta name="twitter:description" content="React火了很久了，一直都停留在照葫芦画瓢按照example凑数的基础上，但是如果真的要了解一个框架，它的生命周期和核心API是最重要的部分了，下面我们就来聊聊React的生命周期、核心API的用法以及React工具集，在使用React进行深度开发的时候，一定会事半功倍。本文假设你已经了解了React的基本开发知识，如果不了解，强烈推荐阮老师的这篇《React 入门实例教程》 一、生命周期 1、">
<meta name="twitter:image" content="https://pbs.twimg.com/media/B-G3_T8CcAAmTHV.jpg:large">
    
        <link rel="alternate" type="application/atom+xml" title="萌小主前端部落" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@1.6.1/css/style.css">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpeg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Dr Meng</h5>
          <a href="mailto:zhangmeng712@gmail.com" title="zhangmeng712@gmail.com" class="mail">zhangmeng712@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/zhangmeng712"  >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">React生命周期、API和深入用法</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">React生命周期、API和深入用法</h1>
        <h5 class="subtitle">
            
                <time datetime="2015-09-06T03:04:22.000Z" itemprop="datePublished" class="page-time">
  2015-09-06
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/javascript/">javascript</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/javascript/react/">react</a></li></ul></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一、生命周期"><span class="post-toc-number">1.</span> <span class="post-toc-text">一、生命周期</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1、创建一个类和实例化的基础方法"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1、创建一个类和实例化的基础方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2、了解this-state和this-prop"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2、了解this.state和this.prop</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3、生命周期详情分析"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3、生命周期详情分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-初始化阶段"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">1) 初始化阶段</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-Mounting阶段"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">2) Mounting阶段</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-数据更新阶段"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">3) 数据更新阶段</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-Unmounting阶段"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">4) Unmounting阶段</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#二、你应该掌握的API用法"><span class="post-toc-number">2.</span> <span class="post-toc-text">二、你应该掌握的API用法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1、常用-API"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">1、常用 API</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-组件相关API"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">2 组件相关API</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3、Add-on-API"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">3、Add-on API</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三-组件的拆分和数据的传递"><span class="post-toc-number">3.</span> <span class="post-toc-text">三 组件的拆分和数据的传递</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考资料"><span class="post-toc-number">4.</span> <span class="post-toc-text">参考资料</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-react-depth"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">React生命周期、API和深入用法</h1>
        <div class="post-meta">
            <time class="post-time" title="2015-09-06 11:04:22" datetime="2015-09-06T03:04:22.000Z"  itemprop="datePublished">2015-09-06</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/javascript/">javascript</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/javascript/react/">react</a></li></ul></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>React火了很久了，一直都停留在照葫芦画瓢按照example凑数的基础上，但是如果真的要了解一个框架，它的生命周期和核心API是最重要的部分了，下面我们就来聊聊React的生命周期、核心API的用法以及React工具集，在使用React进行深度开发的时候，一定会事半功倍。本文假设你已经了解了React的基本开发知识，如果不了解，强烈推荐阮老师的这篇<a target="_blank" href="http://www.ruanyifeng.com/blog/2015/03/react.html">《React 入门实例教程》</a></p>
<h2 id="一、生命周期"><a href="#一、生命周期" class="headerlink" title="一、生命周期"></a>一、生命周期</h2><p><img src="https://pbs.twimg.com/media/B-G3_T8CcAAmTHV.jpg:large" width="650px" height="500px"></p>
<h3 id="1、创建一个类和实例化的基础方法"><a href="#1、创建一个类和实例化的基础方法" class="headerlink" title="1、创建一个类和实例化的基础方法"></a>1、创建一个类和实例化的基础方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//创建组件类</span></div><div class="line"><span class="keyword">var</span> ComponentBox = React.createClass(&#123;</div><div class="line">    <span class="comment">//other lifecycle method</span></div><div class="line">	render:  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="comment">//return JSX code</span></div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//实例化组件</span></div><div class="line"><span class="keyword">var</span> compInstance = React.render(</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">ComponentBox</span> /&gt;</span>,</span></div><div class="line">     document.getElementById('content') //DOM Element</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="2、了解this-state和this-prop"><a href="#2、了解this-state和this-prop" class="headerlink" title="2、了解this.state和this.prop"></a>2、了解this.state和this.prop</h3><p>使用过React的人都会知道它有两个属性，state还有props，他们两者都可以作为render中的data输入源，那两者的区别、联系以及正确的用法又是怎么样的呢。参见这篇<a href="https://github.com/uberVU/react-guide/blob/master/props-vs-state.md" target="_blank">《props-vs-state》</a> 。</p>
<ul>
<li>prop是组件的配置项，是可选的，当组件接收这个参数后它就是不变的。组件改变不了它的props，父组件的props还担当着收集子组件配置项的功能。</li>
<li>state，在组件初始化的时候会赋予state初始的状态，当组件的状态发生变化的时候，组件内部自行管理着state的变化，所以state可以说是组件的私有值。state参数是可有可无的，但当你的组件是“Stateful Component”的时候你就应该考虑使用state了。</li>
</ul>
<p>两者在组件变化的时候的状态改变如下:</p>
<table>
<thead>
<tr>
<th>-</th>
<th><em>props</em></th>
<th><em>state</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>Can get initial value from parent Component?</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Can be changed by parent Component?</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Can set default values inside Component?*</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Can change inside Component?</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td>Can set initial value for child Components?</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Can change in child Components?</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>那么两者如何合理的使用和规划呢。举例来说,在官网<a href="http://facebook.github.io/react/docs/thinking-in-react.html" target="_blank">《thinking-in-react》</a>有这样的一个例子，组件如下图，当需要有过滤和搜索功能的时候，其实组件就是一个“具有状态的组件”了，需要有state管理对应的状态。通过分析，我们可以得到对应的变量规划：</p>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1AAC0JpXXXXcaXpXX45OnYVXX-512-313.jpeg"></p>
<ul>
<li>用于表示所有产品列表的 products</li>
<li>用于表示过滤后的列表 (filterProducts)</li>
<li>表示是否使用过滤的功能(checkValue)</li>
<li>使用搜索过滤的关键词(searchValue)</li>
</ul>
<p>要分析变量是否是state，主要考虑这几个问题：</p>
<ul>
<li>变量是否会通过父组件传递参数，如果是，那么它肯定不是state，这里products 肯定不是state</li>
<li>变量是否会出现变化，如果不会出现变化，那么它肯定不是state</li>
<li>你会不会根其他的state或者props计算这个值，如果是经过计算得到的，那么它一定不是state，由此可见filterProducts也不是state<br>再考虑 checkValue和 searchValue在本质上是随组件内部改变的，所以，这两个变量应该作为state管理。所以最后的程序如下</li>
</ul>
<p></p><p data-height="268" data-theme-id="11872" data-slug-hash="meJwYO" data-default-tab="result" data-user="zhangmeng712" class="codepen">See the Pen <a href="http://codepen.io/zhangmeng712/pen/meJwYO/" target="_blank" rel="external">React filter list demo</a> by zhangmeng (<a href="http://codepen.io/zhangmeng712" target="_blank" rel="external">@zhangmeng712</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

<h3 id="3、生命周期详情分析"><a href="#3、生命周期详情分析" class="headerlink" title="3、生命周期详情分析"></a>3、生命周期详情分析</h3><h4 id="1-初始化阶段"><a href="#1-初始化阶段" class="headerlink" title="1) 初始化阶段"></a>1) 初始化阶段</h4><ul>
<li>getDefaultProps</li>
<li>getInitialState</li>
<li>propTypes</li>
<li>Mixins</li>
<li>statics</li>
<li>displayName</li>
</ul>
<p><strong>getDefaultProps</strong>初始化参数使用，当组件类被创建的时候会被调用一次。输入为函数类型，返回object为this.props的初始化值，当父组件没有指定具体参数的时候，参数会在这个方法中被详细映射，此外 为了增加程序的可读性和容错性，建议在这个方法中指定好参数的初始值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*Input.jsx*/</span></div><div class="line"><span class="comment">/*Form是input的父组件*/</span></div><div class="line"><span class="built_in">module</span>.exports = React.createClass(&#123;</div><div class="line">    <span class="attr">displayName</span>: <span class="string">'Input'</span>,</div><div class="line">    <span class="attr">getDefaultProps</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="comment">//父组件中具体的参数映射，为了程序更加清晰，建议所有的props都在getDefaultProps中定义</span></div><div class="line">      model: &#123;</div><div class="line">        <span class="attr">name</span>: <span class="string">''</span>,</div><div class="line">        <span class="attr">type</span>: <span class="string">''</span>,</div><div class="line">        <span class="attr">value</span>: <span class="string">''</span>,</div><div class="line">        <span class="attr">error</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">enabled</span>: <span class="literal">true</span></div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/* Form.jsx */</span></div><div class="line"><span class="built_in">module</span>.exports = React.createClass(&#123;</div><div class="line">	<span class="attr">displayName</span>: <span class="string">'Form'</span>,</div><div class="line">	<span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span>  (<span class="xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></div><div class="line">				<span class="tag">&lt;<span class="name">Input</span> <span class="attr">model</span>=<span class="string">&#123;fieldModel&#125;</span></span></div><div class="line">                      <span class="attr">ref</span>=<span class="string">&#123;fieldModel.name&#125;/</span>&gt;</div><div class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span>);      </div><div class="line">	&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><strong>getInitialState</strong>初始化state使用，在组件mount之前被调用一次。输入为函数，返回object为this.state的初始化值。<br><strong>propTypes</strong>用于属性的验证使用，输入为object。如果输入的类型和验证中设置的类型不符，在dev环境会给出提示。除了React内置的类型如 React.PropTypes.array，还支持自定义类型，详情见<a href="https://facebook.github.io/react/docs/reusable-components.html" target="_blank">Reusable Components.</a> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ComponentBox = React.createClass(&#123;      </div><div class="line">        <span class="comment">//默认值设置</span></div><div class="line">        getDefaultProps: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                <span class="attr">initalX</span>: <span class="number">14</span>,</div><div class="line">                <span class="attr">initalProp</span>: <span class="string">'11'</span>,  <span class="comment">//内置校验</span></div><div class="line">                customProp: <span class="string">'hi'</span> <span class="comment">//自定义校验</span></div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//允许校验属性的方法，只在dev环境会显示warn</span></div><div class="line">        propTypes: &#123;</div><div class="line">            <span class="comment">//React内置类型</span></div><div class="line">            initalProp: React.PropTypes.array,</div><div class="line">            <span class="comment">//自定义类型</span></div><div class="line">            customProp: <span class="function"><span class="keyword">function</span> (<span class="params">props, propName,componentName</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (props[propName] !== <span class="string">'hello'</span>) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Validation failed, customProp value needs to be hello'</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">var</span> compInstance = React.render(</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">ComponentBox</span> /&gt;</span>,</span></div><div class="line">            document.getElementById('content') //DOM Element</div><div class="line">    );</div></pre></td></tr></table></figure>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB1PGy_JpXXXXamXFXX.YGSWpXX-1010-59.jpg"><br><strong>Mixins<array></array></strong>输入为array类型，用于定义组件间共享的方法，其中的方法可以是生命周期的方法，也可以是自定义方法。不过有几点需要注意：</p>
<ul>
<li>定义在其内部的方法会优先于类上的方法执行</li>
<li>在Mixins中和类上同时定义render方法会抛出异常（Uncaught Error: Invariant Violation: ReactClassInterface: You are attempting to define <code>render</code> on your component more than once）</li>
<li>在Mixins数组中定义同样名称的非生命周期方法也会抛出异常（Uncaught Error: Invariant Violation: ReactClassInterface: You are attempting to define <code>logFunc</code> on your component more than once. ）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> commonMixins = &#123;</div><div class="line">    	<span class="attr">getDefaultProps</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    		<span class="keyword">return</span> &#123;</div><div class="line">    			<span class="attr">initalY</span>: <span class="number">20</span></div><div class="line">    		&#125;</div><div class="line">    	&#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> commonMixins1 = &#123;</div><div class="line">    	<span class="comment">//定义2个render定义会抛出异常</span></div><div class="line">    	<span class="comment">//        render: function () &#123;</span></div><div class="line">    	<span class="comment">//</span></div><div class="line">    	<span class="comment">//        &#125;</span></div><div class="line">    	<span class="comment">// 定义同样名称的非生命周期方法也会抛出异常</span></div><div class="line">    	logFunc: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    		<span class="built_in">console</span>.log(<span class="string">'Mixins log method'</span>)</div><div class="line">    	&#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> commonMixins2 = &#123;</div><div class="line">    	<span class="attr">logFunc</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    		<span class="built_in">console</span>.log(<span class="string">'Mixins log method'</span>)</div><div class="line">    	&#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> ComponentBox = React.createClass(&#123;</div><div class="line">    	<span class="attr">mixins</span>: [commonMixins,commonMixins1,commonMixins2]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">var</span> compInstance = React.render( <span class="xml"><span class="tag">&lt; <span class="attr">ComponentBox</span> / &gt;</span> ,</span></div><div class="line">    	document.getElementById('content') //DOM Element</div><div class="line">    );</div></pre></td></tr></table></figure>
<p><strong>statics</strong>类上的静态方法，可以在实例化之前被类自己调用。<br><strong>displayName</strong>用于在调试信息中标示组件，JSX会自动的设置它的值</p>
<h4 id="2-Mounting阶段"><a href="#2-Mounting阶段" class="headerlink" title="2) Mounting阶段"></a>2) Mounting阶段</h4><ul>
<li>componentWillMount</li>
<li>componentDidMount<br><strong>componentWillMount</strong>只会被调用一次。运行于初始化之后，render方法之前。当在此函数中调用setState后，render会显示被修改的state内容，注意，尽管state内容被改变了，但是不会再多次调用render。<br><strong>componentDidMount</strong>在render执行之后被调用，这个方法只会被调用一次。在这个方法中，可以通过React.findDOMNode(this)对组件的dom元素进行操作，子组件的componentDidMount方法会优先于父组件的componentDidMount方法被调用。我们会在这个方法中执行ajax请求或者调用timer或者用其他类库进行交互。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">componentDidMount: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'-------componentDidMount execute-------'</span>)</div><div class="line">            <span class="keyword">var</span> input = $(<span class="string">'input[type="text"]'</span>);</div><div class="line">            input.focus();</div><div class="line">            <span class="keyword">var</span> cityName = <span class="keyword">this</span>.props.propValue;</div><div class="line">            $.get(<span class="string">'http://api.openweathermap.org/data/2.5/weather?q='</span> + cityName , <span class="function"><span class="keyword">function</span> (<span class="params">data,status</span>) </span>&#123;</div><div class="line">                  <span class="keyword">if</span> (status === <span class="string">'success'</span>) &#123;</div><div class="line">                        <span class="keyword">var</span> weather = data.weather || [];</div><div class="line">                        <span class="keyword">if</span> (weather.length &amp;&amp; weather[<span class="number">0</span>]) &#123;</div><div class="line">                            <span class="keyword">this</span>.setProps(&#123;</div><div class="line">                                <span class="attr">weather</span>: weather[<span class="number">0</span>].description</div><div class="line">                            &#125;);</div><div class="line">                        &#125;</div><div class="line"></div><div class="line">                  &#125;</div><div class="line">            &#125;.bind(<span class="keyword">this</span>))</div><div class="line"></div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h4 id="3-数据更新阶段"><a href="#3-数据更新阶段" class="headerlink" title="3) 数据更新阶段"></a>3) 数据更新阶段</h4><ul>
<li>componentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>componentDidUpdate<br><strong>componentWillReceiveProps</strong>当新的props参数被发现时，就会调用这个方法，普通的render之后是不调用这个函数的。改变之前的props参数可以通过 this.props获得，新的参数可以通过第一个入参获得。在这个方法中调用setState不会触发额外的render调用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">componentWillReceiveProps: <span class="function"><span class="keyword">function</span> (<span class="params">nextProps</span>) </span>&#123;</div><div class="line">           <span class="built_in">console</span>.log(<span class="string">'-------componentWillReceiveProps execute-------'</span>, <span class="string">'old weather is this.props.weather:'</span>, <span class="keyword">this</span>.props.weather, <span class="string">'new props is nextProps.weahter:'</span> + nextProps.weather);</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
<p><strong>shouldComponentUpdate</strong>当props和state变化后被触发，初次render和强制更新的时候此方法不会被调用。当你希望某个props或者state的值改变的时候，不需要render被再次执行，就可以在shouldComponentUpdate中return false来实现，而此时接下来的 componentWillUpdate 和componentDidUpdate也不会执行。默认shouldComponentUpdate会自动返回true，但是你可以通过比较参数的变化来重写这个函数，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">shouldComponentUpdate: <span class="function"><span class="keyword">function</span> (<span class="params">nextProps, nextState</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'-------shouldComponentUpdate execute-------'</span>)</div><div class="line">            <span class="keyword">var</span> flag = <span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span> (nextProps.weather == <span class="string">'light rain'</span> ) &#123;</div><div class="line">                flag = <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> flag;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p><strong>componentWillUpdate</strong>判断完是否能调用render之后，就会执行componentWillUpdate，这个函数是用作render之前发生更新的改变。在这个方法中不能使用setState方法，如果要更新state，在componentWillReceiveProps函数中进行处理。<br><strong>componentDidUpdate</strong>当参数变更完成，render执行完成DOM完全被更新之后会触发，可用于操作新更新的DOM元素，入参为 prevProps和 prevState，以防操作中需要变更前的数据</p>
<h4 id="4-Unmounting阶段"><a href="#4-Unmounting阶段" class="headerlink" title="4) Unmounting阶段"></a>4) Unmounting阶段</h4><ul>
<li>componentWillUnmount<br><strong>componentDidUpdate</strong>当组件从DOM中销毁的时候调用，可在函数中对timer和不需要的dom元素进行清理<br>关于组件的生命周期执行顺序和props更新流程等可以参考以下的例子：<br><p data-height="452" data-theme-id="11872" data-slug-hash="BoNbZz" data-default-tab="result" data-user="zhangmeng712" class="codepen">See the Pen <a href="http://codepen.io/zhangmeng712/pen/BoNbZz/" target="_blank" rel="external">React lifycycle testing</a> by zhangmeng (<a href="http://codepen.io/zhangmeng712" target="_blank" rel="external">@zhangmeng712</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><script async src="//assets.codepen.io/assets/embed/ei.js"></script>



</li>
</ul>
<h2 id="二、你应该掌握的API用法"><a href="#二、你应该掌握的API用法" class="headerlink" title="二、你应该掌握的API用法"></a>二、你应该掌握的API用法</h2><h3 id="1、常用-API"><a href="#1、常用-API" class="headerlink" title="1、常用 API"></a>1、常用 API</h3><ul>
<li>React.createClass</li>
<li>React.render</li>
<li>React.findDOMNode</li>
<li>React.createElement:创建一个<a href="https://facebook.github.io/react/docs/glossary.html" target="_blank">virtual dom</a>进行渲染，可以使用React.render进行加载</li>
<li>React.Children: 用于处理组件中的this.props.children<ul>
<li>React.Children.map</li>
<li>React.Children.only</li>
<li>React.Children.forEach</li>
<li>React.Children.count</li>
</ul>
</li>
</ul>
<h3 id="2-组件相关API"><a href="#2-组件相关API" class="headerlink" title="2 组件相关API"></a>2 组件相关API</h3><ul>
<li>this.setState：设置state，除了支持key value的传送方式，还支持传入fn, 注意通过上述的描述可以调用它的生命周期方法为:componentDidMount以及componentWillMount（不会触发刷新render，但是可以赋值）。</li>
<li>this.setProps：设置props</li>
<li>this.props.children：表示在实例化的时候传入组件的所有子节点，可以通过React.Children来统一处理渲染到页面上</li>
<li>this.props.refs：render中Dom Node可以用ref来标示，这样就可以利用React.findDOMNode(this.refs.xx)来获取对应的DOM元素了。ref可以传入名称，也可以传入函数<a href="https://facebook.github.io/react/docs/more-about-refs.html" target="_blank">更多详情</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//setState的函数传入，入参为之前的state对象，还有当前的props对象</span></div><div class="line"> <span class="keyword">this</span>.setState(<span class="function"><span class="keyword">function</span> (<span class="params">prevState, currentProps</span>) </span>&#123;</div><div class="line">                                <span class="keyword">return</span> &#123;</div><div class="line">                                    <span class="attr">stateValue</span>: <span class="string">'new stateValue'</span></div><div class="line">                                &#125;</div><div class="line">                            &#125;);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//操作this.props.children</span></div><div class="line"> <span class="keyword">var</span> ComponentBox = React.createClass(&#123;</div><div class="line">	<span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></div><div class="line">                &#123;</div><div class="line">                       //能够渲染 </div><div class="line">				 React.Children.map(this.props.children, function (child) &#123;</div><div class="line">                            return <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">                        &#125;)</div><div class="line"></div><div class="line">                &#125;</div><div class="line">                &#123;</div><div class="line">                        //  返回不是object ？渲染不出</div><div class="line">                        React.Children.forEach(this.props.children, function (child) &#123;</div><div class="line">                            return <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">                        &#125;)</div><div class="line"></div><div class="line">                &#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>)</div><div class="line">        &#125; </div><div class="line">&#125;);</div><div class="line"><span class="keyword">var</span> compInstance = React.render(</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">ComponentBox</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>list1<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>list2<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">ComponentBox</span>&gt;</span></span>,</div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'content'</span>) <span class="comment">//DOM Element</span></div><div class="line">    );</div><div class="line"></div><div class="line"><span class="comment">//refs的用法</span></div><div class="line">&lt;input ref=&#123; <span class="function"><span class="keyword">function</span>(<span class="params">component</span>)</span>&#123; React.findDOMNode(component).focus();&#125; &#125; /&gt;</div><div class="line"></div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ref</span>=<span class="string">"myTextInput"</span> <span class="attr">defaultValue</span>=<span class="string">&#123;this.props.propValue&#125;</span> /&gt;</span></span></div><div class="line"> var input = React.findDOMNode(this.refs.myTextInput)</div></pre></td></tr></table></figure>
<h3 id="3、Add-on-API"><a href="#3、Add-on-API" class="headerlink" title="3、Add-on API"></a>3、Add-on API</h3><ul>
<li><p>Animation API:</p>
<ul>
<li><strong>ReactCSSTransitionGroup</strong> 用于控制动画的标签。</li>
<li><strong>transitionName</strong> 定义动画的class前缀，以下例为基础默认在<reactcsstransitiongroup>标签内新增的的元素，动画效果的className为example-enter example-enter-active；元素被删除时候效果的className为 example-leave example-leave-active</reactcsstransitiongroup></li>
<li><strong>transitionAppear</strong> v0.13开始有的方法，用于书写初始化的动画效果，默认是false。注意：一定要先让ReactCSSTransitionGroup这个标签渲染出来，然后再在标签内增加元素，否则效果不生效。</li>
<li><p>有人在使用这个Add-on的时候遇到了动画时序的问题，也可以使用自定义的动画解决，<a href="http://coenraets.org/blog/2014/12/animated-page-transitions-with-react-js/" target="_blank">参考这个例子</a></p>
<pre><code class="javascript">&lt;ReactCSSTransitionGroup transitionName=<span class="string">"example"</span> transitionAppear={<span class="literal">true</span>}&gt;
                  {items}
                  &lt;<span class="regexp">/ReactCSSTransitionGroup&gt;</span>
</code></pre>
<p></p><p data-height="268" data-theme-id="11872" data-slug-hash="bVEomJ" data-default-tab="result" data-user="zhangmeng712" class="codepen">See the Pen <a href="http://codepen.io/zhangmeng712/pen/bVEomJ/" target="_blank" rel="external">react animtion test</a> by zhangmeng (<a href="http://codepen.io/zhangmeng712" target="_blank" rel="external">@zhangmeng712</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>
</li>
</ul>
</li>
<li><p>Test-Utils API:Test-Utils API: 一般的类库很少提供这种Add-on，更多是通过工具对其进行补充，例如Angular的<a href="https://angular.github.io/protractor/#/" target="_blank">protractor</a>，以及Polymer的<a href="https://github.com/Polymer/web-component-tester" target="_blank">web-componnets-tester</a>，这点React还是想的很全面的，当然它也有对其组件测试的Jest框架，但是通过它的Test-Utils可以结合其它的测试框架进行测试。</p>
<ul>
<li>Simulate点击：React.addons.TestUtils.Simulate.click(node);</li>
<li>渲染组件：ReactTestUtils.renderIntoDocument(<list>);</list></li>
<li>获取组件:findRenderedDOMComponentWithClass</li>
<li>Mock组件：mockComponent</li>
<li>参考实例1：<a href="http://maketea.co.uk/2014/05/22/building-robust-web-apps-with-react-part-3.html" target="_blank">Building robust web apps with React: Part 3, testing with Jasmine</a> </li>
<li>参考实例2：<a href="http://island205.com/2015/06/04/write-caculator-with-reactjs-and-tdd/" target="_blank">测试驱动编写 React 简易计算器</a></li>
</ul>
</li>
</ul>
<h2 id="三-组件的拆分和数据的传递"><a href="#三-组件的拆分和数据的传递" class="headerlink" title="三 组件的拆分和数据的传递"></a>三 组件的拆分和数据的传递</h2><p>一般来说，稍微复杂的组件可以被拆分成若干组件（拆分本着一个组件只做一件事情的原则，参见<a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" target="_blank">Single_responsibility_principle</a>）。合理的组件拆分会让React组件的开发复用性更强，那么在组件中如何管理组件间数据的传递？具体可以参考<a href="http://ctheu.com/2015/02/12/how-to-communicate-between-react-components/" target="_blank">《How to communicate between React components》</a>这篇文章，讲解的非常详细。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="https://github.com/uberVU/react-guide/blob/master/props-vs-state.md" target="_blank" rel="external">https://github.com/uberVU/react-guide/blob/master/props-vs-state.md</a></li>
<li><a href="http://ctheu.com/2015/02/12/how-to-communicate-between-react-components/#child_to_parent" target="_blank" rel="external">http://ctheu.com/2015/02/12/how-to-communicate-between-react-components/#child_to_parent</a></li>
<li><a href="http://facebook.github.io/react/docs/thinking-in-react.html" target="_blank" rel="external">http://facebook.github.io/react/docs/thinking-in-react.html</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-04-17T07:55:18.000Z" itemprop="dateUpdated">2017-04-17 15:55:18</time>
</span><br>


        这里写留言或版权声明：<a href="/2015/09/06/450/" target="_blank" rel="external">https://mengbaby.github.io/2015/09/06/450/</a>
    </div>
    <footer>
        <a href="https://mengbaby.github.io">
            <img src="/img/avatar.jpeg" alt="Dr Meng">
            Dr Meng
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Mtags/React/">React</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://mengbaby.github.io/2015/09/06/450/&title=《React生命周期、API和深入用法》 — 萌小主前端部落&pic=https://mengbaby.github.io/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://mengbaby.github.io/2015/09/06/450/&title=《React生命周期、API和深入用法》 — 萌小主前端部落&source=the more you know the more you know you don't know" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://mengbaby.github.io/2015/09/06/450/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《React生命周期、API和深入用法》 — 萌小主前端部落&url=https://mengbaby.github.io/2015/09/06/450/&via=https://mengbaby.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://mengbaby.github.io/2015/09/06/450/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2015/03/15/369/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">mobile H5布局大全-rem flexbox详解</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2015/09/21/556/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">browserify和webpack快速配置入门教程</h4>
      </a>
    </div>
  
</nav>



    




<section class="comments" id="comments">
    <div id="disqus_thread"></div>
    <script>
    var disqus_shortname = 'data4q-com';
    lazyScripts.push('//' + disqus_shortname + '.disqus.com/embed.js')
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>







</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
            <span>Dr Meng &copy; 2017</span>
        </p>
        <p><a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备17021258号</a></p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://mengbaby.github.io/2015/09/06/450/&title=《React生命周期、API和深入用法》 — 萌小主前端部落&pic=https://mengbaby.github.io/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://mengbaby.github.io/2015/09/06/450/&title=《React生命周期、API和深入用法》 — 萌小主前端部落&source=the more you know the more you know you don't know" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://mengbaby.github.io/2015/09/06/450/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《React生命周期、API和深入用法》 — 萌小主前端部落&url=https://mengbaby.github.io/2015/09/06/450/&via=https://mengbaby.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://mengbaby.github.io/2015/09/06/450/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABwElEQVR42u3aQYrDMAwF0N7/0h2Y1UBx50ty3FCeVyVJw/NGWF95POL1/F2r63/X++vJOzcsXFzcMff5dr2+OnkyX7kBFxf3PPd9oUkK0+uTqyur90fFDhcX92bc5GiS38XFxf0O7qoYTVojXFzcO3OrzUkVlB+DtvVquLi4A241ML3i94X5Li4ubpHbCzd7pWdDtIqLi3uEuyoo1bFoL07ttUO4uLhnuPnAo3p86Z25os3j4uIe5E4i1PxIlBS1QsqLi4u7lTv59Cr/2GLeDj3yqomLi3uE24tTe4Xsn3/h4uIe4faiiiQ8nby5EIjg4uJewC2Uj+AYlESr1XgFFxf3s9xqDNorcElbtfTg4uIe5PZKz7wdqoazuLi4n+JW5zDVDUyiVVxc3DPcXkuTxyK7Pu/AxcU9yc0HqAliV1HDxcW9Azc5rORBRrXJKWwMFxf3IHcSayYbq8ajhWkwLi7uBdxqQdkVfyTxSi98wcXF3cXNi06+73khW97FxcU9yO0NSvPmZ9soFxcX92bcKjQZxlRHL7i4uPfkVgcw+ZaizeDi4h7k7mpUemWrUEZxcXGPcCd/vmKrk03i4uKOuT+ySbR7YG7sBgAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };



</script>

<script src="//unpkg.com/hexo-theme-material-indigo@1.6.1/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@1.6.1/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '点我点我点我！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
